(this.webpackJsonpecomercecoder=this.webpackJsonpecomercecoder||[]).push([[0],{50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},54:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c(22),a=c.n(i),r=(c(50),c(51),c(32),c(52),c(12)),s=c(38),d=c(41),o=c(11),j=c(2),l=Object(n.createContext)({}),b=function(e){var t=e.children,c=Object(n.useState)([]),i=Object(o.a)(c,2),a=i[0],r=i[1],b=Object(n.useState)(0),m=Object(o.a)(b,2),O=m[0],h=m[1],u=Object(n.useState)(0),x=Object(o.a)(u,2),f=x[0],p=x[1];Object(n.useEffect)((function(){var e,t=0,c=0,n=Object(d.a)(a);try{for(n.s();!(e=n.n()).done;){var i=e.value;c+=i.cantidad,t+=i.cantidad*i.item.precio}}catch(r){n.e(r)}finally{n.f()}h(c),p(t)}),[a]);return Object(j.jsx)(l.Provider,{value:{cart:a,addItem:function(e,t){if(i=e.id,a.some((function(e){return e.item.id===i}))){var c=a.filter((function(t){return t.item.id!==e.id})),n=a.find((function(t){return t.item.id===e.id})).cantidad+t;r([].concat(Object(s.a)(c),[{item:e,cantidad:n}]))}else{var i;r([].concat(Object(s.a)(a),[{item:e,cantidad:t}]))}},removeItem:function(e){r(a.filter((function(t){return t.item.id!==e})))},clear:function(){r([])},totalCant:O,totalPrec:f},children:t})},m=c(43),O=(c(54),c(15)),h=function(){var e=Object(n.useContext)(l).totalCant;return Object(j.jsx)("div",{children:e?Object(j.jsx)(O.b,{to:"/cart",children:Object(j.jsxs)(r.a,{variant:"primary",children:[" Cart: ",Object(j.jsx)(m.a,{variant:"light",children:e})]})}):null})},u=function(){return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("div",{className:"logo",children:Object(j.jsx)("img",{src:"#",alt:"Logo"})}),Object(j.jsx)("div",{className:"menu",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(O.b,{to:"/",children:"Inicio"})}),Object(j.jsx)("li",{children:Object(j.jsx)(O.b,{to:"/juegos/juegos",children:" Juegos"})}),Object(j.jsx)("li",{children:Object(j.jsx)(O.b,{to:"/accesorios/accesorios",children:"Accesorios"})})]})}),Object(j.jsx)("div",{className:"cartWidget",children:Object(j.jsx)(h,{})})]})},x=c(20),f=(c(59),function(e){var t=e.id,c=e.img,n=e.title,i=e.descripcion;e.stock;return Object(j.jsx)("div",{className:"card bg-dark text-center animate__animated animate__fadeInUp",children:Object(j.jsxs)("div",{className:"card-body text-light",children:[Object(j.jsx)("div",{className:"card-title tamanio",children:Object(j.jsx)("h4",{children:n})}),Object(j.jsx)("div",{className:"img",children:Object(j.jsx)("img",{src:c,alt:"img",className:"img card-img-top"})}),Object(j.jsx)("p",{className:"card-text text-secondary",children:i||"Descripci\xf3n del producto, click en mas infomraci\xf3n para ver el detalle"}),Object(j.jsx)(r.a,{className:"btn-masInfo",children:Object(j.jsx)(O.b,{className:"btn-link",to:"/itemDetail/".concat(t),children:" + Informaci\xf3n "})})]})})}),p=(c(60),c(6)),v=c.n(p),g=c(9),C=c(26),N=(c(40),C.a.initializeApp({apiKey:"AIzaSyDtePceWSSy4O0o_jxOSLrwFeJkWJpG6as",authDomain:"ecommercecoder-c8a40.firebaseapp.com",projectId:"ecommercecoder-c8a40",storageBucket:"ecommercecoder-c8a40.appspot.com",messagingSenderId:"89630139725",appId:"1:89630139725:web:066780653407b721744304"})),k=function(){return C.a.firestore(N)};f.propTypes={title:v.a.string.isRequired,img:v.a.string,descripcion:v.a.string};var y=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],i=t[1],a=Object(g.f)().itemParam;return Object(n.useEffect)((function(){var e=k().collection("productos");a?e.where("categoria","==",a).get().then((function(e){e.size>0&&i(e.docs.map((function(e){return Object(x.a)({id:e.id},e.data())})))})):e.get().then((function(e){e.size>0&&i(e.docs.map((function(e){return Object(x.a)({id:e.id},e.data())})))}))}),[a]),Object(j.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(j.jsx)("div",{className:"row",children:c.map((function(e){return Object(j.jsx)("div",{className:"col-md-4",children:Object(j.jsx)(f,{id:e.id,title:e.nombre,img:e.img,descripcion:e.descripcion,stock:e.stock})},e.id)}))})})},I=(c(62),function(e){var t=e.item,c=e.stock,i=e.initial,a=e.onAdd,s=Object(n.useState)(parseInt(i)),d=Object(o.a)(s,2),b=d[0],m=d[1],O=Object(n.useState)("u"),h=Object(o.a)(O,1)[0],u=Object(n.useContext)(l).addItem;return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)(r.a,{variant:"danger",className:"btnCards",onClick:function(){b>1&&m((function(e){return e-1}))},children:"-"}),Object(j.jsxs)("span",{children:["  ",b,"  "]}),Object(j.jsxs)("span",{children:["  ",h,"  "]}),Object(j.jsx)(r.a,{className:"btnCards",onClick:function(){b<c&&m((function(e){return e+1}))},children:"+"})]}),Object(j.jsx)(r.a,{variant:"success",className:"btn-addCart",onClick:function(){u(t,b),a(b)},children:"Agregar al Carrito"})]})}),S=(c(63),function(e){var t=e.item,c=Object(n.useState)(0),i=Object(o.a)(c,2),a=i[0],s=i[1];return Object(j.jsx)("div",{className:"card bg-dark text-center animate__animated animate__fadeInUp",children:Object(j.jsxs)("div",{className:"card-body text-light",children:[Object(j.jsx)("div",{className:"card-title tamanio",children:Object(j.jsx)("h4",{children:t.nombre})}),Object(j.jsx)("div",{className:"img",children:Object(j.jsx)("img",{src:t.img,alt:"img",className:"img card-img-top"})}),Object(j.jsx)("p",{className:"card-text text-secondary",children:t.descripcion?t.descripcion:"Descripci\xf3n del producto, click en mas infomraci\xf3n para ver el detalle"}),Object(j.jsxs)("h4",{children:["Precio: $ ",t.precio]}),0===a?Object(j.jsx)(I,{item:t,stock:t.stock,initial:"1",onAdd:function(e){s(e)}}):Object(j.jsx)(O.b,{to:"/cart",children:Object(j.jsx)(r.a,{variant:"primary",children:"Terminar la compra"})})]})})}),P=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],i=t[1],a=Object(g.f)().itemId;return Object(n.useEffect)((function(){var e;(e=a,k().collection("productos").doc(e).get()).then((function(e){e.exists&&i(Object(x.a)({id:e.id},e.data()))}))}),[a]),Object(j.jsx)("div",{className:"container d-flex justify-content-center align-items-center h-100",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-6",children:Object(j.jsx)(S,{item:c})},c.id)})})},w=c(45),A=(c(64),c(29)),D=c(27),F=(c(65),c(19)),T=function(e){var t=Object(n.useContext)(l),c=t.cart,i=t.totalPrec,a=Object(n.useState)({name:"",email:"",phone:""}),s=Object(o.a)(a,2),d=s[0],b=s[1],m=function(e){b(Object(x.a)(Object(x.a)({},d),{},Object(A.a)({},e.target.name,e.target.value)))};return Object(j.jsx)("div",{className:"fontColor",children:Object(j.jsxs)(D.a,Object(x.a)(Object(x.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(j.jsx)(D.a.Header,{closeButton:!0,children:Object(j.jsx)(D.a.Title,{id:"contained-modal-title-vcenter",children:Object(j.jsx)("h4",{children:"Ingrese sus datos:"})})}),Object(j.jsx)(D.a.Body,{children:Object(j.jsxs)(F.a,{children:[Object(j.jsxs)(F.a.Group,{controlId:"formGridName",children:[Object(j.jsx)(F.a.Label,{children:"Nombre y Apelido:"}),Object(j.jsx)(F.a.Control,{required:!0,type:"name",placeholder:"Name",name:"name",onChange:m})]}),Object(j.jsxs)(F.a.Group,{controlId:"formGridEmail",children:[Object(j.jsx)(F.a.Label,{children:"Email"}),Object(j.jsx)(F.a.Control,{required:!0,type:"email",placeholder:"Email",name:"email",onChange:m})]}),Object(j.jsxs)(F.a.Group,{controlId:"formGridPhone",children:[Object(j.jsx)(F.a.Label,{children:"Tel\xe9fono: "}),Object(j.jsx)(F.a.Control,{required:!0,type:"phone",placeholder:"Sin 0 (11) Sin 15 (12345678)",name:"phone",onChange:m})]})]})}),Object(j.jsxs)(D.a.Footer,{children:[Object(j.jsx)(r.a,{variant:"success",onClick:function(){!function(e,t,c){var n=k(),i=n.collection("ordenes"),a={};a.date=C.a.firestore.Timestamp.fromDate(new Date),a.buyer={name:c.name,phone:c.phone,email:c.email},a.total=t,a.items=e.map((function(e){return{id:e.item.id,nombre:e.item.nombre,cantidad:e.cantidad,precio:e.item.precio*e.cantidad}})),i.add(a).then((function(e){alert(e.id)})).catch((function(e){console.log(e)})).finally((function(){console.log("termino la promesa")}));var r=n.collection("productos").where(C.a.firestore.FieldPath.documentId(),"in",e.map((function(e){return e.item.id}))),s=n.batch();r.get().then((function(t){t.docs.forEach((function(t){s.update(t.ref,{stock:t.data().stock-e.find((function(e){return e.item.id===t.id})).cantidad})})),s.commit().then()}))}(c,i,d),e.onHide()},children:"Confirmar"}),Object(j.jsx)(r.a,{variant:"danger",onClick:e.onHide,children:"Cancelar"})]})]}))})},_=function(){var e=Object(n.useContext)(l),t=e.cart,c=e.removeItem,i=e.clear,a=e.totalCant,s=e.totalPrec,d=Object(n.useState)(!1),b=Object(o.a)(d,2),m=b[0],h=b[1];return Object(j.jsx)("div",{children:t.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(w.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Producto"}),Object(j.jsx)("th",{children:"Precio"}),Object(j.jsx)("th",{children:"Cantidad"}),Object(j.jsx)("th",{children:"Subtotal"})]})}),Object(j.jsxs)("tbody",{children:[t.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[" ",e.item.nombre," "]}),Object(j.jsxs)("td",{children:[" ",e.item.precio]}),Object(j.jsxs)("td",{children:[" ",e.cantidad," "]}),Object(j.jsxs)("td",{children:[" ",e.cantidad*e.item.precio]}),Object(j.jsx)("td",{children:Object(j.jsx)(r.a,{variant:"danger",onClick:function(){return c(e.item.id)},children:" Quitar "})})]},e.item.id)})),Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{colSpan:"2",children:["Cantidad de Productos: ",a]}),Object(j.jsxs)("td",{colSpan:"2",children:["TOTAL: ",s]}),Object(j.jsx)("td",{children:Object(j.jsx)(r.a,{variant:"danger",onClick:function(){return i()},children:"Vaciar Carrito"})})]})]})]}),Object(j.jsx)(T,{show:m,onHide:function(){return h(!1)},children:Object(j.jsx)(T,{})}),Object(j.jsx)(r.a,{variant:"success",onClick:function(){return h(!0)},children:"Finalizar Compra"})]}):Object(j.jsxs)("h2",{children:[" No hay items en el carrito ",Object(j.jsx)(O.b,{to:"/",children:" Ir al Home"})]})})};var E=function(){return Object(j.jsx)(O.a,{children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u,{}),Object(j.jsxs)(g.c,{children:[Object(j.jsx)(g.a,{exact:!0,path:"/",children:Object(j.jsx)(y,{})}),Object(j.jsx)(g.a,{path:"/juegos/:itemParam",children:Object(j.jsx)(y,{})}),Object(j.jsx)(g.a,{path:"/accesorios/:itemParam",children:Object(j.jsx)(y,{})}),Object(j.jsx)(g.a,{path:"/itemDetail/:itemId",children:Object(j.jsx)(P,{})}),Object(j.jsx)(g.a,{path:"/cart",children:Object(j.jsx)(_,{})})]})]})})};var L=function(){return Object(j.jsx)(b,{children:Object(j.jsx)(E,{})})},G=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,70)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),i(e),a(e),r(e)}))};c(67);a.a.render(Object(j.jsx)(L,{}),document.getElementById("root")),G()}},[[68,1,2]]]);
//# sourceMappingURL=main.39673b65.chunk.js.map